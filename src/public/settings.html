<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISP Management - Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/settings.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<body>
    <script src="js/layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            createSidebar('sidebarContainer');
        });
    </script>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Container -->
            <div class="col-md-2 p-0" id="sidebarContainer"></div>
                       
            
            <!-- Main Content -->
            <div class="col-md-10 main-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>System Settings</h2>
                </div>

                <!-- Settings Tabs -->
                <div class="card">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="settingsTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab" aria-controls="general" aria-selected="true">General</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="network-tab" data-bs-toggle="tab" data-bs-target="#network" type="button" role="tab" aria-controls="network" aria-selected="false">Network</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="billing-tab" data-bs-toggle="tab" data-bs-target="#billing" type="button" role="tab" aria-controls="billing" aria-selected="false">Billing</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="notifications-tab" data-bs-toggle="tab" data-bs-target="#notifications" type="button" role="tab" aria-controls="notifications" aria-selected="false">Notifications</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab" aria-controls="users" aria-selected="false">Users</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="ai-tab" data-bs-toggle="tab" data-bs-target="#ai" type="button" role="tab" aria-controls="ai" aria-selected="false">AI Service</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="mikrotik-tab" data-bs-toggle="tab" data-bs-target="#mikrotik" type="button" role="tab" aria-controls="mikrotik" aria-selected="false">Mikrotik</button>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="settingsTabContent">
                            <!-- General Settings -->
                            <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                                <h5 class="mb-4">General Settings</h5>
                                <form id="generalSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="companyName" class="form-label">Company Name</label>
                                            <input type="text" class="form-control" id="companyName" value="ISP Management System">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="companyLogo" class="form-label">Company Logo</label>
                                            <input type="file" class="form-control" id="companyLogo">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="timezone" class="form-label">Timezone</label>
                                            <select class="form-select" id="timezone">
                                                <option value="UTC">UTC</option>
                                                <option value="America/New_York">Eastern Time (ET)</option>
                                                <option value="America/Chicago">Central Time (CT)</option>
                                                <option value="America/Denver">Mountain Time (MT)</option>
                                                <option value="America/Los_Angeles">Pacific Time (PT)</option>
                                                <option value="Asia/Jakarta">Western Indonesian Time (WIB)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="dateFormat" class="form-label">Date Format</label>
                                            <select class="form-select" id="dateFormat">
                                                <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                                                <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="currency" class="form-label">Currency</label>
                                            <select class="form-select" id="currency">
                                                <option value="USD">USD ($)</option>
                                                <option value="EUR">EUR (€)</option>
                                                <option value="GBP">GBP (£)</option>
                                                <option value="IDR">IDR (Rp)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="language" class="form-label">Language</label>
                                            <select class="form-select" id="language">
                                                <option value="en">English</option>
                                                <option value="es">Spanish</option>
                                                <option value="fr">French</option>
                                                <option value="id">Indonesian</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save General Settings</button>
                                </form>
                            </div>
                            
                            <!-- Network Settings -->
                            <div class="tab-pane fade" id="network" role="tabpanel" aria-labelledby="network-tab">
                                <h5 class="mb-4">Network Settings</h5>
                                <form id="networkSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="monitoringInterval" class="form-label">Monitoring Interval (minutes)</label>
                                            <input type="number" class="form-control" id="monitoringInterval" value="5" min="1" max="60">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="bandwidthUnit" class="form-label">Bandwidth Unit</label>
                                            <select class="form-select" id="bandwidthUnit">
                                                <option value="Kbps">Kbps</option>
                                                <option value="Mbps" selected>Mbps</option>
                                                <option value="Gbps">Gbps</option>
                                            </select>
                                        </div>
                                    </div>
                                    <h5 class="mt-4">Device Monitoring Settings</h5>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="monitoringEnabled">
                                        <label class="form-check-label" for="monitoringEnabled">Enable Automatic Monitoring</label>
                                    </div>
                                    <div class="mb-3">
                                        <label for="cpuThreshold" class="form-label">CPU Usage Threshold (%)</label>
                                        <input type="number" class="form-control" id="cpuThreshold" min="50" max="95" value="80">
                                    </div>
                                    <div class="mb-3">
                                        <label for="memoryThreshold" class="form-label">Memory Usage Threshold (%)</label>
                                        <input type="number" class="form-control" id="memoryThreshold" min="50" max="95" value="80">
                                    </div>
                                    <div class="mb-3">
                                        <label for="temperatureThreshold" class="form-label">Temperature Threshold (°C)</label>
                                        <input type="number" class="form-control" id="temperatureThreshold" min="50" max="90" value="70">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Network Settings</button>
                                </form>
                            </div>

                            <!-- Billing Settings -->
                            <div class="tab-pane fade" id="billing" role="tabpanel" aria-labelledby="billing-tab">
                                <h5 class="mb-4">Billing Settings</h5>
                                <form id="billingSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="invoiceDueDate" class="form-label">Invoice Due Days</label>
                                            <input type="number" class="form-control" id="invoiceDueDate" value="15">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="lateFeePercentage" class="form-label">Late Fee Percentage</label>
                                            <input type="number" class="form-control" id="lateFeePercentage" value="2">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="taxRate" class="form-label">Tax Rate (%)</label>
                                            <input type="number" class="form-control" id="taxRate" value="10">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="paymentGracePeriod" class="form-label">Payment Grace Period (days)</label>
                                            <input type="number" class="form-control" id="paymentGracePeriod" value="5">
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableAutoSuspend" checked>
                                        <label class="form-check-label" for="enableAutoSuspend">
                                            Enable automatic service suspension for overdue accounts
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Billing Settings</button>
                                </form>
                            </div>

                            <!-- Notifications Settings -->
                            <div class="tab-pane fade" id="notifications" role="tabpanel" aria-labelledby="notifications-tab">
                                <h5 class="mb-4">Notifications Settings</h5>
                                <form id="notificationsSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="emailServer" class="form-label">Email Server (SMTP)</label>
                                            <input type="text" class="form-control" id="emailServer" value="smtp.example.com">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="emailPort" class="form-label">SMTP Port</label>
                                            <input type="number" class="form-control" id="emailPort" value="587">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="emailUsername" class="form-label">SMTP Username</label>
                                            <input type="text" class="form-control" id="emailUsername">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="emailPassword" class="form-label">SMTP Password</label>
                                            <input type="password" class="form-control" id="emailPassword">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="senderEmail" class="form-label">Sender Email</label>
                                            <input type="email" class="form-control" id="senderEmail" value="noreply@example.com">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="senderName" class="form-label">Sender Name</label>
                                            <input type="text" class="form-control" id="senderName" value="ISP Management System">
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableEmailNotifications" checked>
                                        <label class="form-check-label" for="enableEmailNotifications">
                                            Enable email notifications
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableSMSNotifications">
                                        <label class="form-check-label" for="enableSMSNotifications">
                                            Enable SMS notifications
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableWhatsAppNotifications" checked>
                                        <label class="form-check-label" for="enableWhatsAppNotifications">
                                            Enable WhatsApp notifications
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Notification Settings</button>
                                </form>
                            </div>

                            <!-- Users Settings -->
                            <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                                <h5 class="mb-4">User Management Settings</h5>
                                <form id="usersSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="passwordPolicy" class="form-label">Password Policy</label>
                                            <select class="form-select" id="passwordPolicy">
                                                <option value="basic">Basic (8+ characters)</option>
                                                <option value="medium" selected>Medium (8+ chars, numbers, letters)</option>
                                                <option value="strong">Strong (12+ chars, numbers, special chars)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="sessionTimeout" class="form-label">Session Timeout (minutes)</label>
                                            <input type="number" class="form-control" id="sessionTimeout" value="30">
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enable2FA" checked>
                                        <label class="form-check-label" for="enable2FA">
                                            Enable Two-Factor Authentication
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enforcePasswordChange">
                                        <label class="form-check-label" for="enforcePasswordChange">
                                            Enforce password change every 90 days
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save User Settings</button>
                                </form>
                            </div>

                            <!-- AI Service Settings -->
                            <div class="tab-pane fade" id="ai" role="tabpanel" aria-labelledby="ai-tab">
                                <h5 class="mb-4">AI Service Settings</h5>
                                <form id="aiSettingsForm" class="settings-form" novalidate>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="aiModel" class="form-label">AI Model</label>
                                            <select class="form-select" id="aiModel">
                                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                                <option value="gpt-4">GPT-4</option>
                                                <option value="llama2">Llama 2</option>
                                                <option value="mistral">Mistral</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="aiEndpoint" class="form-label">AI Endpoint URL</label>
                                            <input type="text" class="form-control" id="aiEndpoint" value="http://localhost:11434/api/generate">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="aiApiKey" class="form-label">API Key</label>
                                            <input type="password" class="form-control" id="aiApiKey">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="maxTokens" class="form-label">Max Tokens</label>
                                            <input type="number" class="form-control" id="maxTokens" value="2000">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="aiLanguage" class="form-label">Default Language</label>
                                            <select class="form-select" id="aiLanguage">
                                                <option value="en">English</option>
                                                <option value="id">Indonesian</option>
                                                <option value="es">Spanish</option>
                                                <option value="fr">French</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="aiTemperature" class="form-label">Temperature</label>
                                            <input type="number" class="form-control" id="aiTemperature" value="0.7" min="0" max="1" step="0.1">
                                            <small class="form-text text-muted">Controls randomness (0-1)</small>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="responseTemplates" class="form-label">Response Templates</label>
                                        <textarea class="form-control" id="responseTemplates" rows="4" placeholder="Enter response templates in JSON format"></textarea>
                                        <small class="form-text text-muted">Templates for automated responses</small>
                                    </div>
                                    <div class="mb-3">
                                        <h6>Template Variables</h6>
                                        <div id="variablesList" class="mb-2">
                                            <!-- Variables will be added here dynamically -->
                                        </div>
                                        <button type="button" class="btn btn-sm btn-outline-primary" id="addVariable">
                                            <i class="bi bi-plus-circle"></i> Add Variable
                                        </button>
                                    </div>
                                    <div class="mb-3">
                                        <h6>Template Preview</h6>
                                        <div id="templatePreview" class="border p-3 bg-light">
                                            <!-- Template preview will be shown here -->
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableAIAssistant" checked>
                                        <label class="form-check-label" for="enableAIAssistant">
                                            Enable AI Assistant
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="requireEmail">
                                        <label class="form-check-label" for="requireEmail">
                                            Require Email for AI Assistance
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="requirePhone">
                                        <label class="form-check-label" for="requirePhone">
                                            Require Phone for AI Assistance
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save AI Settings</button>
                                </form>
                            </div>

                            <!-- Mikrotik Settings -->
                            <div class="tab-pane fade" id="mikrotik" role="tabpanel" aria-labelledby="mikrotik-tab">
                                <h5 class="mb-4">Mikrotik Settings</h5>
                                <form id="mikrotikSettingsForm" class="settings-form" novalidate>
                                    <div id="routersList">
                                        <!-- Router configurations will be added here dynamically -->
                                    </div>
                                    
                                    <button type="button" class="btn btn-success mb-4" id="addRouter">
                                        <i class="fas fa-plus"></i> Add Router
                                    </button>

                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="defaultQueueType" class="form-label">Default Queue Type</label>
                                            <select class="form-select" id="defaultQueueType">
                                                <option value="pcq">PCQ (Per Connection Queue)</option>
                                                <option value="sfq">SFQ (Stochastic Fairness Queueing)</option>
                                                <option value="red">RED (Random Early Detection)</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="defaultFirewallPolicy" class="form-label">Default Firewall Policy</label>
                                            <select class="form-select" id="defaultFirewallPolicy">
                                                <option value="accept">Accept</option>
                                                <option value="drop" selected>Drop</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableBandwidthLimiting" checked>
                                        <label class="form-check-label" for="enableBandwidthLimiting">
                                            Enable bandwidth limiting
                                        </label>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input class="form-check-input" type="checkbox" id="enableQoS" checked>
                                        <label class="form-check-label" for="enableQoS">
                                            Enable Quality of Service (QoS)
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Save Mikrotik Settings</button>
                                </form>

                                <!-- Router Template -->
                                <template id="routerTemplate">
                                    <div class="router-config border rounded p-3 mb-3">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <h6 class="mb-0">Router Configuration</h6>
                                            <button type="button" class="btn btn-danger btn-sm remove-router">
                                                <i class="fas fa-trash"></i> Remove
                                            </button>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Router Name</label>
                                                <input type="text" class="form-control router-name" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Host</label>
                                                <input type="text" class="form-control router-host" required>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">API Port</label>
                                                <input type="number" class="form-control router-port" value="8728" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">API Timeout (seconds)</label>
                                                <input type="number" class="form-control router-timeout" value="30" required>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label class="form-label">Username</label>
                                                <input type="text" class="form-control router-username" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Password</label>
                                                <input type="password" class="form-control router-password" required>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/settings.js"></script>
</body>
</html>